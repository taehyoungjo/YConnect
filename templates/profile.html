{% extends "layout.html" %}

{% block title %}
    Profile
{% endblock %}

{% block main %}
{% for profile in profile%}
    <div class="card">
        <img src="{{ profile["file_path"] }}" class="card-img-top" alt="Responsive image">
        <div class="card-body">
            <h5 class="card-title">{{ profile["name"]}}</h5>
            <h6>{{ profile["major"] }}</h6>
            <h6>{{ profile["year"] }}</h6>
            <h6>{{ profile["residential_college"] }}</h6>
            <p class="card-text">{{ profile["bio"] }}</p>
        </div>
    </div>

{% endfor %}

{% if not isSelf %}
	{% if not isConnected %}
	<form action="javascript:post()">
		<button type="submit" class="btn btn-primary" id="connectedBtn">Add Connection</button>
	</form>
	{% else %}
		<button type="button" class="btn btn-primary" disabled>Connected</button>
	{% endif %}
{% endif %}

<script>
	function post() {
		$.ajax({
            type:'POST',
            url:"/profile",
            data:{"id": {{ id|safe }}},
            success:function (data) {
            	$('#connectedBtn').prop('disabled', true);
            	$('#connectedBtn').html("Connected");
            },
            error:function (xhr, status, errorThrown) {
                console.log(xhr); //could be alert if you don't use the dev tools
            },
            dataType:"json"
        });
	};
</script>

{% endblock %}